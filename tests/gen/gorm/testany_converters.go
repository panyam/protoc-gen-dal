// Code generated by protoc-gen-dal-gorm. DO NOT EDIT.
package gorm

import (
	"fmt"

	"github.com/panyam/protoc-gen-dal/pkg/converters"
	api "github.com/panyam/protoc-gen-dal/tests/gen/go/api"
)

// TestRecord1ToTestRecord1GORM converts a api.TestRecord1 to TestRecord1GORM.
// The optional decorator function allows custom field transformations.
func TestRecord1ToTestRecord1GORM(
	src *api.TestRecord1,
	dest *TestRecord1GORM,
	decorator func(*api.TestRecord1, *TestRecord1GORM) error,
) (out *TestRecord1GORM, err error) {
	if src == nil {
		return nil, nil
	}
	if dest == nil {
		dest = &TestRecord1GORM{}
	}

	// Initialize struct with inline values
	*dest = TestRecord1GORM{
		AnEnum:      src.AnEnum,
		ListOfEnums: src.ListOfEnums,
	}
	out = dest

	if src.TimeField != nil {
		out.TimeField = converters.TimestampToTime(src.TimeField)
	}

	if src.ExtraData != nil {
		out.ExtraData, err = converters.AnyToBytes(src.ExtraData)
		if err != nil {
			return nil, fmt.Errorf("converting ExtraData: %w", err)
		}
	}

	if src.MapStringToEnum != nil {
		out.MapStringToEnum = src.MapStringToEnum
	}

	// Apply decorator if provided
	if decorator != nil {
		if err := decorator(src, dest); err != nil {
			return nil, err
		}
	}

	return dest, nil
}

// TestRecord1FromTestRecord1GORM converts a TestRecord1GORM back to api.TestRecord1.
// The optional decorator function allows custom field transformations.
func TestRecord1FromTestRecord1GORM(
	dest *api.TestRecord1,
	src *TestRecord1GORM,
	decorator func(dest *api.TestRecord1, src *TestRecord1GORM) error,
) (out *api.TestRecord1, err error) {
	if src == nil {
		return nil, nil
	}
	if dest == nil {
		dest = &api.TestRecord1{}
	}

	// Initialize struct with inline values
	*dest = api.TestRecord1{
		TimeField:       converters.TimeToTimestamp(src.TimeField),
		AnEnum:          src.AnEnum,
		ListOfEnums:     src.ListOfEnums,
		MapStringToEnum: src.MapStringToEnum,
	}
	out = dest

	out.ExtraData, err = converters.BytesToAny(src.ExtraData)
	if err != nil {
		return nil, fmt.Errorf("converting ExtraData: %w", err)
	}

	// Apply decorator if provided
	if decorator != nil {
		if err := decorator(dest, src); err != nil {
			return nil, err
		}
	}

	return out, nil
}
