// Code generated by protoc-gen-dal-gorm. DO NOT EDIT.
package gorm

import (
	"context"
	"errors"

	"gorm.io/gorm"
)

// DocumentGormPartialDAL provides database access helper methods for DocumentGormPartial.
type DocumentGormPartialDAL struct {
	// WillCreate hook is called when Save detects the record doesn't exist and will create it.
	// Return an error to prevent creation.
	WillCreate func(context.Context, *DocumentGormPartial) error
}

// Save creates or updates a DocumentGormPartial record.
// If the record doesn't exist (RowsAffected == 0), it will call WillCreate hook and then create the record.
func (d *DocumentGormPartialDAL) Save(ctx context.Context, db *gorm.DB, obj *DocumentGormPartial) error {
	// Validate primary key(s)
	if obj.Id == 0 {
		return errors.New("primary key 'Id' cannot be empty")
	}

	result := db.Save(obj)
	if result.Error == nil && result.RowsAffected == 0 {
		// Record doesn't exist - about to create
		if d.WillCreate != nil {
			if err := d.WillCreate(ctx, obj); err != nil {
				return err
			}
		}
		return db.Create(obj).Error
	}
	return result.Error
}

// Get retrieves a DocumentGormPartial record by primary key.
// Returns (nil, nil) if the record is not found (not an error).
func (d *DocumentGormPartialDAL) Get(ctx context.Context, db *gorm.DB, id uint32) (*DocumentGormPartial, error) {
	var out DocumentGormPartial
	err := db.First(&out, "id = ?", id).Error
	if err != nil {
		if errors.Is(err, gorm.ErrRecordNotFound) {
			return nil, nil
		}
		return nil, err
	}
	return &out, nil
}

// Delete removes a DocumentGormPartial record by primary key.
func (d *DocumentGormPartialDAL) Delete(ctx context.Context, db *gorm.DB, id uint32) error {
	return db.Where("id = ?", id).Delete(&DocumentGormPartial{}).Error
}

// List retrieves multiple DocumentGormPartial records using the provided query.
// The caller is responsible for adding filters, ordering, and pagination to the query.
func (d *DocumentGormPartialDAL) List(ctx context.Context, query *gorm.DB) ([]*DocumentGormPartial, error) {
	var out []*DocumentGormPartial
	err := query.Find(&out).Error
	return out, err
}

// BatchGet retrieves multiple DocumentGormPartial records by primary key.
// Results are returned in the order provided by the database (not necessarily the input order).
func (d *DocumentGormPartialDAL) BatchGet(ctx context.Context, db *gorm.DB, ids []uint32) ([]*DocumentGormPartial, error) {
	if len(ids) == 0 {
		return []*DocumentGormPartial{}, nil
	}

	var out []*DocumentGormPartial
	err := db.Where("id IN ?", ids).Find(&out).Error
	return out, err
}

// DocumentGormSkipDAL provides database access helper methods for DocumentGormSkip.
type DocumentGormSkipDAL struct {
	// WillCreate hook is called when Save detects the record doesn't exist and will create it.
	// Return an error to prevent creation.
	WillCreate func(context.Context, *DocumentGormSkip) error
}

// Save creates or updates a DocumentGormSkip record.
// If the record doesn't exist (RowsAffected == 0), it will call WillCreate hook and then create the record.
func (d *DocumentGormSkipDAL) Save(ctx context.Context, db *gorm.DB, obj *DocumentGormSkip) error {
	// Validate primary key(s)
	if obj.Id == 0 {
		return errors.New("primary key 'Id' cannot be empty")
	}

	result := db.Save(obj)
	if result.Error == nil && result.RowsAffected == 0 {
		// Record doesn't exist - about to create
		if d.WillCreate != nil {
			if err := d.WillCreate(ctx, obj); err != nil {
				return err
			}
		}
		return db.Create(obj).Error
	}
	return result.Error
}

// Get retrieves a DocumentGormSkip record by primary key.
// Returns (nil, nil) if the record is not found (not an error).
func (d *DocumentGormSkipDAL) Get(ctx context.Context, db *gorm.DB, id uint32) (*DocumentGormSkip, error) {
	var out DocumentGormSkip
	err := db.First(&out, "id = ?", id).Error
	if err != nil {
		if errors.Is(err, gorm.ErrRecordNotFound) {
			return nil, nil
		}
		return nil, err
	}
	return &out, nil
}

// Delete removes a DocumentGormSkip record by primary key.
func (d *DocumentGormSkipDAL) Delete(ctx context.Context, db *gorm.DB, id uint32) error {
	return db.Where("id = ?", id).Delete(&DocumentGormSkip{}).Error
}

// List retrieves multiple DocumentGormSkip records using the provided query.
// The caller is responsible for adding filters, ordering, and pagination to the query.
func (d *DocumentGormSkipDAL) List(ctx context.Context, query *gorm.DB) ([]*DocumentGormSkip, error) {
	var out []*DocumentGormSkip
	err := query.Find(&out).Error
	return out, err
}

// BatchGet retrieves multiple DocumentGormSkip records by primary key.
// Results are returned in the order provided by the database (not necessarily the input order).
func (d *DocumentGormSkipDAL) BatchGet(ctx context.Context, db *gorm.DB, ids []uint32) ([]*DocumentGormSkip, error) {
	if len(ids) == 0 {
		return []*DocumentGormSkip{}, nil
	}

	var out []*DocumentGormSkip
	err := db.Where("id IN ?", ids).Find(&out).Error
	return out, err
}
