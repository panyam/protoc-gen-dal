// Code generated by protoc-gen-dal-datastore. DO NOT EDIT.
package {{ .PackageName }}

import (
{{ range .Imports }}
	"{{ . }}"
{{ end }}
)

{{ range .Converters }}
// {{ .SourceType }}To{{ .TargetType }} converts a {{ .SourceType }} to {{ .TargetType }}.
//
// The optional decorator function allows custom field transformations after conversion.
//
// Parameters:
//   - src: Source {{ .SourceType }} message to convert from
//   - dest: Destination {{ .TargetType }} entity (if nil, a new one is created)
//   - decorator: Optional function for custom transformations
//
// Returns:
//   - Converted {{ .TargetType }} entity
//   - Error if conversion fails
func {{ .SourceType }}To{{ .TargetType }}(
	src *{{ .SourcePkgName }}.{{ .SourceType }},
	dest *{{ .TargetType }},
	decorator func(*{{ .SourcePkgName }}.{{ .SourceType }}, *{{ .TargetType }}) error,
) (out *{{ .TargetType }}, err error) {
	if src == nil {
		return nil, nil
	}
	if dest == nil {
		dest = &{{ .TargetType }}{}
	}
	out = dest

	// Convert fields
{{ range .FieldMappings }}
	out.{{ .TargetField }} = src.{{ .SourceField }}
{{ end }}

	// Apply decorator if provided
	if decorator != nil {
		if err := decorator(src, dest); err != nil {
			return nil, err
		}
	}

	return dest, nil
}

// {{ .SourceType }}From{{ .TargetType }} converts a {{ .TargetType }} back to {{ .SourceType }}.
//
// The optional decorator function allows custom field transformations after conversion.
//
// Parameters:
//   - dest: Destination {{ .SourceType }} message (if nil, a new one is created)
//   - src: Source {{ .TargetType }} entity to convert from
//   - decorator: Optional function for custom transformations
//
// Returns:
//   - Converted {{ .SourceType }} message
//   - Error if conversion fails
func {{ .SourceType }}From{{ .TargetType }}(
	dest *{{ .SourcePkgName }}.{{ .SourceType }},
	src *{{ .TargetType }},
	decorator func(*{{ .SourcePkgName }}.{{ .SourceType }}, *{{ .TargetType }}) error,
) (out *{{ .SourcePkgName }}.{{ .SourceType }}, err error) {
	if src == nil {
		return nil, nil
	}
	if dest == nil {
		dest = &{{ .SourcePkgName }}.{{ .SourceType }}{}
	}
	out = dest

	// Convert fields
{{ range .FieldMappings }}
	out.{{ .SourceField }} = src.{{ .TargetField }}
{{ end }}

	// Apply decorator if provided
	if decorator != nil {
		if err := decorator(dest, src); err != nil {
			return nil, err
		}
	}

	return dest, nil
}

{{ end }}
